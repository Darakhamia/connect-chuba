# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Music System API

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API –∫–ª—é—á–∏ –¥–ª—è –º—É–∑—ã–∫–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã ECHO.

## üéµ YouTube

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ **YouTube Data API v3**
4. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á –≤ —Ä–∞–∑–¥–µ–ª–µ "Credentials"
5. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```env
   YOUTUBE_API_KEY=AIzaSy...
   ```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- 10,000 –∫–≤–æ—Ç –≤ –¥–µ–Ω—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- 1 –∑–∞–ø—Ä–æ—Å –≤–∏–¥–µ–æ = 1 –∫–≤–æ—Ç–∞
- 1 –∑–∞–ø—Ä–æ—Å –ø–ª–µ–π–ª–∏—Å—Ç–∞ = 1 –∫–≤–æ—Ç–∞ + 1 –∫–≤–æ—Ç–∞ –∑–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üéß Spotify

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Spotify for Developers](https://developer.spotify.com/dashboard)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Client ID** –∏ **Client Secret**
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```env
   SPOTIFY_CLIENT_ID=–≤–∞—à_client_id
   SPOTIFY_CLIENT_SECRET=–≤–∞—à_client_secret
   ```

**–í–∞–∂–Ω–æ:**
- –î–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è Spotify —Ç—Ä–µ–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω—É–∂–µ–Ω **Spotify Premium**
- –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- –ü–æ–ª–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç OAuth –∏ Web Playback SDK (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–∑–∂–µ)

## üçé Apple Music

### –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–ø—Ä–æ—â–µ)
–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–µ–∫–∞—Ö –±–µ–∑ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```env
NEXT_PUBLIC_APPLE_MUSIC_TOKEN=–≤–∞—à_musickit_token
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (—Å–ª–æ–∂–Ω–µ–µ)
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ [Apple Developer Program](https://developer.apple.com/) ($99/–≥–æ–¥)
2. –°–æ–∑–¥–∞–π—Ç–µ **MusicKit Identifier** –≤ —Ä–∞–∑–¥–µ–ª–µ "Certificates, Identifiers & Profiles"
3. –°–æ–∑–¥–∞–π—Ç–µ **Private Key** –¥–ª—è MusicKit
4. –°–∫–∞—á–∞–π—Ç–µ `.p8` —Ñ–∞–π–ª —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º
5. –ü–æ–ª—É—á–∏—Ç–µ:
   - **Team ID** (–≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É Apple Developer Dashboard)
   - **Key ID** (–≤ —Ä–∞–∑–¥–µ–ª–µ Keys)
   - **Private Key** (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ .p8 —Ñ–∞–π–ª–∞)
6. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```env
   APPLE_MUSIC_TEAM_ID=–≤–∞—à_team_id
   APPLE_MUSIC_KEY_ID=–≤–∞—à_key_id
   APPLE_MUSIC_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----
   –≤–∞—à_–ø—Ä–∏–≤–∞—Ç–Ω—ã–π_–∫–ª—é—á
   -----END PRIVATE KEY-----
   NEXT_PUBLIC_APPLE_MUSIC_TOKEN=–≤–∞—à_developer_token
   ```

**–í–∞–∂–Ω–æ:**
- Developer Token –Ω—É–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É—è JWT
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞: –¥–æ 6 –º–µ—Å—è—Ü–µ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω—É–∂–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ Apple Music –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

## üîä SoundCloud

SoundCloud –∏—Å–ø–æ–ª—å–∑—É–µ—Ç oEmbed API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö - API –∫–ª—é—á **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è**!

–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π SoundCloud Widget, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## üì§ Uploaded Files

–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ **UploadThing**:
```env
UPLOADTHING_SECRET=sk_...
UPLOADTHING_APP_ID=...
NEXT_PUBLIC_UPLOADTHING_APP_ID=...
```

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
- mp3
- m4a
- ogg
- wav
- flac

–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 50MB (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `src/app/api/uploadthing/core.ts`)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–µ–π –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
npm run dev

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
pm2 restart connect-chuba
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –æ—à–∏–±–æ–∫:
```bash
pm2 logs connect-chuba --lines 50
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª `.env` –≤ Git!**

- –§–∞–π–ª `.env` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.example` –∫–∞–∫ —à–∞–±–ª–æ–Ω
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ `.env` –≤—Ä—É—á–Ω—É—é —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏

## üìä –ö–≤–æ—Ç—ã –∏ –ª–∏–º–∏—Ç—ã

| –°–µ—Ä–≤–∏—Å | –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç | –°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è |
|--------|------------------|----------------------|
| YouTube | 10,000 –∫–≤–æ—Ç/–¥–µ–Ω—å | $0 (–º–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ) |
| Spotify | –ë–µ–∑ –ª–∏–º–∏—Ç–∞ | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |
| Apple Music | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ | $99/–≥–æ–¥ (Developer Program) |
| SoundCloud | –ë–µ–∑ –ª–∏–º–∏—Ç–∞ | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |
| UploadThing | 2GB —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ | $10/–º–µ—Å –∑–∞ 10GB |

## üÜò Troubleshooting

### YouTube: "Quota exceeded"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–≤–æ—Ç –≤ Google Cloud Console
- –ó–∞–ø—Ä–æ—Å–∏—Ç–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–≤–æ—Ç—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –ë–î)

### Spotify: "Invalid client"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Client ID –∏ Secret
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –≤ Spotify Dashboard

### Apple Music: "Invalid token"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è Developer Token
- –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω —Å –ø–æ–º–æ—â—å—é JWT –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Team ID –∏ Key ID –≤–µ—Ä–Ω—ã

### SoundCloud: "Track not found"
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –∏–ª–∏ —É–¥–∞–ª—ë–Ω–Ω—ã–º–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ URL –≤–∞–ª–∏–¥–µ–Ω

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [YouTube Data API Docs](https://developers.google.com/youtube/v3)
- [Spotify Web API Docs](https://developer.spotify.com/documentation/web-api)
- [Apple MusicKit JS Docs](https://developer.apple.com/documentation/musickitjs)
- [SoundCloud oEmbed Docs](https://developers.soundcloud.com/docs/oembed)
